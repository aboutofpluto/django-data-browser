{"version":3,"sources":["WindowDimensions.js","Tooltip.js","Util.js","ContextMenu.js","Results.js","Query.js","Components.js","App.js","index.js"],"names":["getWindowDimensions","window","width","innerWidth","height","innerHeight","useWindowDimensions","useState","windowDimensions","setWindowDimensions","useEffect","handleResize","addEventListener","removeEventListener","ShowTooltip","React","createContext","HideTooltip","Tooltip","props","hidden","left","top","messages","node","useRef","state","setState","divStyle","Provider","value","event","target","getBoundingClientRect","right","bottom","preventDefault","children","length","ref","className","style","map","m","assert","require","fetchInProgress","nextFetch","undefined","version","document","getElementById","textContent","trim","CopyText","text","TLink","onClick","range","createRange","selectNodeContents","current","getSelection","removeAllRanges","addRange","execCommand","blur","type","SLink","AbortError","name","Error","doFetch","url","options","process","reject","Promise","resolve","fetch","then","response","next","res","err","ok","status","response_version","headers","get","console","log","location","reload","doGet","method","json","doPost","data","Cookies","body","JSON","stringify","useData","setData","updates","prev","doPatch","catch","e","Save","apiUrl","redirectUrl","saving","setSaving","to","Delete","Overlay","message","Object","prototype","hasOwnProperty","HasActionIcon","modelField","showTooltip","useContext","hideTooltip","actions","onMouseEnter","onMouseLeave","HasToManyIcon","toMany","useToggle","initial","toggled","setToggled","toggleLink","ShowContextMenu","ContextMenu","x","y","entries","handleClick","contains","w","offsetWidth","h","offsetHeight","visibility","filter","toString","clientY","clientX","entry","key","fn","Spacer","spaces","Array","_","HeadCell","query","field","leftArrow","rightArrow","verticalArrows","getField","pathStr","getType","fieldClass","getFieldClass","showContextMenu","onContextMenu","action","prettyName","form","createElement","push","hiddenField","appendChild","submit","syncPost","removeField","moveField","canPivot","togglePivot","concrete","defaultLookup","addFilter","toggleSort","prettyPathStr","dsc","priority","asc","null","sort","DataCell","formattedValue","displayValue","span","formatHint","fullRow","href","highCutOff","lowCutOff","toExponential","significantFigures","toLocaleString","String","dangerouslySetInnerHTML","__html","colSpan","navigator","clipboard","writeText","filterForValue","addExactFilter","addExactExclude","drillDown","VTableHeadRow","fields","classNameFirst","i","VTableBodyRow","row","formatHints","HTableRow","col","Results","cols","rows","overlay","colFields","topTitleSpace","rowFields","sideTitleSpace","hasBody","bodyFields","rowIndex","table","empty","filterErrors","parsedFilterValues","getPartsForQuery","model","f","pivoted","join","filters","lookup","encodeURIComponent","limit","getRelUrlForQuery","media","query_str","getUrlForQuery","baseUrl","relUrl","origin","Query","config","setQuery","this","path","split","slice","allModelFields","types","lookup_type","lookups","endsWith","choices","defaultValue","findIndex","newFields","priorities","newPriority","Math","max","index","_getFieldIndex","newIndex","splice","concat","newSort","newFilters","getDefaultLookupValue","negate","IsNull","NotNull","values","fieldValues","Set","size","Number","defaultFilters","defaultRowLimit","prettyPath","part","FilterValue","lookupType","onChange","onChangeEvent","helpText","date","datetime","option","step","parts","Filter","errorMessage","parsed","removeFilter","addField","defaultSort","setFilterLookup","sortedLookups","lookupName","val","setFilterValue","Filters","onSubmit","Field","FieldGroup","modelFields","getModelFields","sortedFields","fieldName","ModelSelector","sortedModels","modelsByAppLabel","reduce","a","appLabel","setModel","byAppLabel","models","label","Logo","QueryPage","results","fieldsToggled","fieldsToggleLink","setLimit","min","getUrlForMedia","view","pk","EditSavedView","canMakePublic","useParams","setView","link","placeholder","replace","createdTime","description","checked","public","publicLink","googleSheetsFormula","SavedViewList","savedViews","HomePage","QueryApp","fieldStr","setStatus","queryStr","useLocation","search","handleError","Sentry","fetchResults","popstate","reqState","history","replaceState","queryObj","queryChange","newState","request","pushState","req","deepStrictEqual","App","basename","parse","sentryDsn","dsn","release","attachStacktrace","maxValueLength","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.b62fff87.chunk.js","sourcesContent":["import { useState, useEffect } from \"react\";\n\nfunction getWindowDimensions() {\n  const { innerWidth: width, innerHeight: height } = window;\n  return {\n    width,\n    height,\n  };\n}\n\nexport default function useWindowDimensions() {\n  const [windowDimensions, setWindowDimensions] = useState(\n    getWindowDimensions()\n  );\n\n  useEffect(() => {\n    function handleResize() {\n      setWindowDimensions(getWindowDimensions());\n    }\n\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  return windowDimensions;\n}\n","import React, { useState, useRef } from \"react\";\nimport \"./App.scss\";\nimport useWindowDimensions from \"./WindowDimensions\";\nconst ShowTooltip = React.createContext();\nconst HideTooltip = React.createContext();\n\nfunction Tooltip(props) {\n    const hidden = { left: 0, top: 0, messages: [] };\n    const pad = 10;\n    const minWidth = 200;\n    const node = useRef();\n    const [state, setState] = useState(hidden);\n    const { width } = useWindowDimensions();\n\n    function showTooltip(event, messages) {\n        if (messages) {\n            var left = event.target.getBoundingClientRect().right;\n            var top = event.target.getBoundingClientRect().top - pad;\n            if (left + minWidth > width) {\n                left = width - minWidth;\n                top = event.target.getBoundingClientRect().bottom;\n            }\n            setState({ messages, left, top });\n        }\n        event.preventDefault();\n    }\n\n    function hideTooltip(event) {\n        setState(hidden);\n        event.preventDefault();\n    }\n\n    const divStyle = { left: state.left, top: state.top };\n\n    return (\n        <ShowTooltip.Provider value={showTooltip}>\n            <HideTooltip.Provider value={hideTooltip}>\n                {props.children}\n                {state.messages.length ? (\n                    <div ref={node} className=\"Tooltip\" style={divStyle}>\n                        {state.messages.map((m) => (\n                            <p>{m}</p>\n                        ))}\n                    </div>\n                ) : null}\n            </HideTooltip.Provider>\n        </ShowTooltip.Provider>\n    );\n}\n\nexport { Tooltip, ShowTooltip, HideTooltip };\n","import React, { useState, useEffect, useRef, useContext } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport Cookies from \"js-cookie\";\nimport \"./App.scss\";\nimport { ShowTooltip, HideTooltip } from \"./Tooltip\";\nconst assert = require(\"assert\");\nlet fetchInProgress = false;\nlet nextFetch = undefined;\n\nconst version = document.getElementById(\"backend-version\").textContent.trim();\n\nfunction CopyText(props) {\n    const { text } = props;\n    const ref = useRef(null);\n    return (\n        <>\n            <span ref={ref}>{text}</span>{\" \"}\n            <TLink\n                className=\"CopyToClipboard\"\n                onClick={(event) => {\n                    const range = document.createRange();\n                    range.selectNodeContents(ref.current);\n                    window.getSelection().removeAllRanges();\n                    window.getSelection().addRange(range);\n                    document.execCommand(\"copy\");\n                    window.getSelection().removeAllRanges();\n                    event.target.blur();\n                }}\n            >\n                (copy to clipboard)\n            </TLink>\n        </>\n    );\n}\n\nfunction TLink(props) {\n    const { className, onClick, children } = props;\n    return (\n        <button {...{ onClick }} type=\"button\" className={`TLink ${className}`}>\n            {children}\n        </button>\n    );\n}\n\nfunction SLink(props) {\n    const { className, onClick, children } = props;\n    return (\n        <button\n            {...{ onClick }}\n            type=\"button\"\n            className={`SLink material-icons ${className}`}\n        >\n            {children}\n        </button>\n    );\n}\n\nclass AbortError extends Error {\n    name = \"AbortError\";\n}\n\nfunction doFetch(url, options, process) {\n    if (fetchInProgress) {\n        if (nextFetch) {\n            nextFetch.reject(new AbortError(\"skipped\"));\n        }\n        return new Promise((resolve, reject) => {\n            nextFetch = { resolve, reject, url, options, process };\n        });\n    }\n\n    fetchInProgress = true;\n\n    return fetch(url, options)\n        .then((response) => {\n            // do we have a next fetch we need to trigger\n            const next = nextFetch;\n            nextFetch = undefined;\n            fetchInProgress = false;\n\n            if (next) {\n                doFetch(next.url, next.options, next.process).then(\n                    (res) => next.resolve(res),\n                    (err) => next.reject(err)\n                );\n                throw new AbortError(\"superceeded\");\n            } else {\n                return response;\n            }\n        })\n        .then((response) => {\n            // check status\n            assert.ok(response.status >= 200);\n            assert.ok(response.status < 300);\n            return response;\n        })\n        .then((response) => {\n            // check server version\n            const response_version = response.headers.get(\"x-version\");\n            if (response_version !== version) {\n                console.log(\n                    \"Version mismatch, hard reload\",\n                    version,\n                    response_version\n                );\n                window.location.reload(true);\n            }\n            return response;\n        })\n        .then((response) => process(response)); // process data\n}\n\nfunction doGet(url) {\n    return doFetch(url, { method: \"GET\" }, (response) => response.json());\n}\n\nfunction doDelete(url) {\n    return doFetch(\n        url,\n        {\n            method: \"DELETE\",\n            headers: { \"X-CSRFToken\": Cookies.get(\"csrftoken\") },\n        },\n        (response) => response\n    );\n}\n\nfunction doPatch(url, data) {\n    return doFetch(\n        url,\n        {\n            method: \"PATCH\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"X-CSRFToken\": Cookies.get(\"csrftoken\"),\n            },\n            body: JSON.stringify(data),\n        },\n        (response) => response.json()\n    );\n}\n\nfunction doPost(url, data) {\n    return doFetch(\n        url,\n        {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"X-CSRFToken\": Cookies.get(\"csrftoken\"),\n            },\n            body: JSON.stringify(data),\n        },\n        (response) => response.json()\n    );\n}\n\nfunction syncPost(url, data) {\n    const form = document.createElement(\"form\");\n    form.method = \"post\";\n    form.action = url;\n\n    data.push([\"csrfmiddlewaretoken\", Cookies.get(\"csrftoken\")]);\n\n    for (const [key, value] of data) {\n        const hiddenField = document.createElement(\"input\");\n        hiddenField.type = \"hidden\";\n        hiddenField.name = key;\n        hiddenField.value = value;\n\n        form.appendChild(hiddenField);\n    }\n\n    document.body.appendChild(form);\n    form.submit();\n}\n\nfunction useData(url) {\n    const [data, setData] = useState();\n    useEffect(() => {\n        doGet(url).then((response) => setData(response));\n    }, [url]);\n    return [\n        data,\n        (updates) => {\n            setData((prev) => ({ ...prev, ...updates }));\n            doPatch(url, updates)\n                .then((response) =>\n                    setData((prev) => ({ ...prev, ...response }))\n                )\n                .catch((e) => {\n                    if (e.name !== \"AbortError\") throw e;\n                });\n        },\n    ];\n}\n\nfunction Save(props) {\n    const { name, apiUrl, data, redirectUrl } = props;\n    const [saving, setSaving] = useState(\"save\");\n    if (saving === \"save\")\n        return (\n            <TLink\n                onClick={(event) => {\n                    setSaving(\"saving\");\n                    doPost(apiUrl, data).then((response) =>\n                        setSaving(response)\n                    );\n                }}\n            >\n                Save {name || \"\"}\n            </TLink>\n        );\n    else if (saving === \"saving\") return <>Saving {name || \"\"}</>;\n    else {\n        const url =\n            typeof redirectUrl === \"function\"\n                ? redirectUrl(saving)\n                : redirectUrl;\n        return <Redirect to={url} />;\n    }\n}\n\nfunction Delete(props) {\n    const { name, apiUrl, redirectUrl } = props;\n    const [state, setState] = useState(\"normal\");\n    if (state === \"normal\")\n        return (\n            <TLink\n                onClick={(event) => {\n                    setState(\"confirm\");\n                }}\n            >\n                Delete {name || \"\"}\n            </TLink>\n        );\n    else if (state === \"confirm\")\n        return (\n            <TLink\n                onClick={(event) => {\n                    setState(\"deleting\");\n                    doDelete(apiUrl).then((response) => setState(\"deleted\"));\n                }}\n            >\n                Are you sure?\n            </TLink>\n        );\n    else if (state === \"deleting\") return \"Deleting\";\n    else if (state === \"deleted\") return <Redirect to={redirectUrl} />;\n    else throw new Error(`unknown delete state: ${state}`);\n}\n\nfunction Overlay(props) {\n    if (!props.message) return null;\n    return (\n        <div className=\"Overlay\">\n            <h1>{props.message}</h1>\n        </div>\n    );\n}\n\nfunction is(x: any, y: any) {\n    return (\n        (x === y && (x !== 0 || 1 / x === 1 / y)) || (x !== x && y !== y) // eslint-disable-line no-self-compare\n    );\n}\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction shallowEqual(objA: mixed, objB: mixed): boolean {\n    if (is(objA, objB)) {\n        return true;\n    }\n\n    if (\n        typeof objA !== \"object\" ||\n        objA === null ||\n        typeof objB !== \"object\" ||\n        objB === null\n    ) {\n        return false;\n    }\n\n    const keysA = Object.keys(objA);\n    const keysB = Object.keys(objB);\n\n    if (keysA.length !== keysB.length) {\n        console.log(\"different keys\", keysA, keysB);\n        return false;\n    }\n\n    // Test for A's keys different from B.\n    for (let i = 0; i < keysA.length; i++) {\n        if (\n            !hasOwnProperty.call(objB, keysA[i]) ||\n            !is(objA[keysA[i]], objB[keysA[i]])\n        ) {\n            console.log(\n                \"different key\",\n                keysA[i],\n                objA[keysA[i]],\n                objB[keysA[i]]\n            );\n            return false;\n        }\n    }\n\n    return true;\n}\n\nfunction HasActionIcon(props) {\n    const { modelField, message } = props;\n    const showTooltip = useContext(ShowTooltip);\n    const hideTooltip = useContext(HideTooltip);\n\n    if (modelField.actions.length) {\n        return (\n            <>\n                <span> </span>\n                <span\n                    className=\"Symbol material-icons-outlined\"\n                    onMouseEnter={(e) => showTooltip(e, [message])}\n                    onMouseLeave={(e) => hideTooltip(e)}\n                >\n                    build_circle\n                </span>\n            </>\n        );\n    } else {\n        return \"\";\n    }\n}\n\nfunction HasToManyIcon(props) {\n    const { modelField, message } = props;\n    const showTooltip = useContext(ShowTooltip);\n    const hideTooltip = useContext(HideTooltip);\n\n    if (modelField.toMany) {\n        return (\n            <>\n                <span> </span>\n                <span\n                    onMouseEnter={(e) => showTooltip(e, [message])}\n                    onMouseLeave={(e) => hideTooltip(e)}\n                >\n                    {\"\\u21f6\"}\n                </span>\n            </>\n        );\n    } else {\n        return \"\";\n    }\n}\n\nfunction useToggle(initial = false) {\n    const [toggled, setToggled] = useState(initial);\n\n    const toggleLink = (\n        <SLink\n            className=\"ToggleLink\"\n            onClick={() => setToggled((toggled) => !toggled)}\n        >\n            {toggled ? \"remove\" : \"add\"}\n        </SLink>\n    );\n\n    return [toggled, toggleLink];\n}\n\nexport {\n    TLink,\n    SLink,\n    doPatch,\n    doGet,\n    doDelete,\n    doPost,\n    useData,\n    version,\n    Save,\n    Delete,\n    CopyText,\n    fetchInProgress,\n    Overlay,\n    shallowEqual,\n    syncPost,\n    HasActionIcon,\n    HasToManyIcon,\n    useToggle,\n};\n","import React, { useState, useRef, useEffect } from \"react\";\nimport \"./App.scss\";\nimport useWindowDimensions from \"./WindowDimensions\";\nimport { TLink } from \"./Util\";\n\nconst ShowContextMenu = React.createContext();\n\nfunction ContextMenu(props) {\n    const hidden = { x: 0, y: 0, top: 0, left: 0, entries: [] };\n    const pad = 10;\n    const node = useRef();\n    const [state, setState] = useState(hidden);\n    const { width, height } = useWindowDimensions();\n\n    function handleClick(e) {\n        if (node.current && node.current.contains(e.target)) return;\n        setState(hidden);\n    }\n\n    useEffect(() => {\n        document.addEventListener(\"mousedown\", handleClick);\n        return () => {\n            document.removeEventListener(\"mousedown\", handleClick);\n        };\n    });\n\n    useEffect(() => {\n        if (node.current) {\n            const w = node.current.offsetWidth;\n            const h = node.current.offsetHeight;\n            setState({\n                x: state.x,\n                y: state.y,\n                top: state.y + h + pad > height ? height - h - pad : state.y,\n                left: state.x + w + pad > width ? width - w - pad : state.x,\n                entries: state.entries,\n            });\n        }\n    }, [width, height, state.entries, state.x, state.y]);\n\n    function showContextMenu(event, entries) {\n        entries = entries.filter((x) => x);\n        if (entries.length && window.getSelection().toString().length === 0) {\n            setState({\n                entries,\n                y: event.clientY,\n                x: event.clientX,\n                top: 0,\n                left: 0,\n            });\n            event.preventDefault();\n        }\n    }\n\n    const divStyle = {\n        left: state.left,\n        top: state.top,\n        visibility: state.left + state.top === 0 ? \"hidden\" : \"visible\",\n    };\n\n    return (\n        <ShowContextMenu.Provider value={showContextMenu}>\n            {props.children}\n            {state.entries.length ? (\n                <div ref={node} className=\"ContextMenu\" style={divStyle}>\n                    {state.entries.map((entry) => (\n                        <p key={entry.name}>\n                            <TLink\n                                onClick={() => {\n                                    entry.fn();\n                                    setState(hidden);\n                                }}\n                            >\n                                {entry.name}\n                            </TLink>\n                        </p>\n                    ))}\n                </div>\n            ) : null}\n        </ShowContextMenu.Provider>\n    );\n}\n\nexport { ContextMenu, ShowContextMenu };\n","import React, { useContext } from \"react\";\nimport \"./App.scss\";\nimport { TLink, SLink, Overlay, syncPost, doPost, HasActionIcon } from \"./Util\";\nimport { ShowContextMenu } from \"./ContextMenu\";\n\nfunction Spacer(props) {\n  const { spaces } = props;\n  if (spaces > 0) {\n    return [...Array(spaces)].map((_, key) => (\n      <td className=\"Empty\" key={key} />\n    ));\n  }\n  return null;\n}\n\nfunction HeadCell(props) {\n  const { query, field, className, leftArrow, rightArrow, verticalArrows } =\n    props;\n  const modelField = query.getField(field.pathStr);\n  const type = query.getType(modelField);\n  const fieldClass = query.getFieldClass(modelField);\n\n  const showContextMenu = useContext(ShowContextMenu);\n\n  function onContextMenu(e) {\n    showContextMenu(\n      e,\n      modelField.actions.map((action) => {\n        return {\n          name: action.prettyName,\n          fn: () =>\n            doPost(\"\", {\n              action: action.name,\n              field: field.pathStr,\n            }).then((response) => syncPost(response.url, response.data)),\n        };\n      })\n    );\n  }\n\n  return (\n    <th\n      className={`HeadCell ContextCursor ${className} ${fieldClass}`}\n      onContextMenu={onContextMenu}\n    >\n      <SLink onClick={() => query.removeField(field)}>close</SLink>\n      {leftArrow && (\n        <SLink onClick={() => query.moveField(field, true)}>\n          {verticalArrows ? \"expand_less\" : \"chevron_left\"}\n        </SLink>\n      )}\n      {rightArrow && (\n        <SLink onClick={() => query.moveField(field, false)}>\n          {verticalArrows ? \"expand_more\" : \"chevron_right\"}\n        </SLink>\n      )}\n      {modelField.canPivot && (\n        <SLink onClick={() => query.togglePivot(field)}>\n          pivot_table_chart\n        </SLink>\n      )}\n      {modelField.concrete && type.defaultLookup ? (\n        <>\n          <SLink onClick={() => query.addFilter(field.pathStr)}>\n            filter_alt\n          </SLink>{\" \"}\n          <TLink onClick={() => query.toggleSort(field)}>\n            {query.prettyPathStr(field.pathStr)}\n            {\n              {\n                dsc: `↑${field.priority}`,\n                asc: `↓${field.priority}`,\n                null: \"\",\n              }[field.sort]\n            }\n          </TLink>\n        </>\n      ) : (\n        \" \" + query.prettyPathStr(field.pathStr)\n      )}\n      <HasActionIcon\n        modelField={modelField}\n        message=\"Admin actions availble on right click.\"\n      />\n    </th>\n  );\n}\n\nfunction DataCell(props) {\n  const {\n    modelField,\n    className,\n    span,\n    value,\n    formatHint,\n    query,\n    pathStr,\n    fullRow,\n  } = props;\n\n  // The value we will use in copy\n  let formattedValue;\n  if (value === undefined) {\n    formattedValue = \"\";\n  } else if (value === null) {\n    formattedValue = \"null\";\n  } else if (modelField.type === \"html\") {\n    formattedValue = value;\n  } else if (modelField.type === \"url\") {\n    formattedValue = <a href={value}>{value}</a>;\n  } else if (modelField.type === \"number\") {\n    if (\n      value > formatHint.highCutOff ||\n      value < -formatHint.highCutOff ||\n      (value && value < formatHint.lowCutOff && value > -formatHint.lowCutOff)\n    ) {\n      formattedValue = value.toExponential(formatHint.significantFigures - 1);\n    } else {\n      formattedValue = value.toLocaleString(undefined, formatHint);\n    }\n  } else {\n    formattedValue = String(value);\n  }\n\n  // Any extra gubbins we need to render it\n  let displayValue;\n  if (value === null) {\n    displayValue = <span className=\"Null\">{formattedValue}</span>;\n  } else if (formattedValue === \"\") {\n    displayValue = \"\\xa0\"; // nbsp\n  } else if (modelField.type === \"html\") {\n    displayValue = <div dangerouslySetInnerHTML={{ __html: value }} />;\n  } else {\n    displayValue = formattedValue;\n  }\n\n  const showContextMenu = useContext(ShowContextMenu);\n  function onContextMenu(e) {\n    modelField.type !== \"html\" &&\n      showContextMenu(e, [\n        navigator.clipboard && {\n          name: \"Copy\",\n          fn: () => navigator.clipboard.writeText(formattedValue),\n        },\n        modelField.concrete &&\n          query.filterForValue(pathStr, value) && {\n            name: \"Filter\",\n            fn: () => query.addExactFilter(pathStr, value),\n          },\n        modelField.concrete &&\n          query.filterForValue(pathStr, value) && {\n            name: \"Exclude\",\n            fn: () => query.addExactExclude(pathStr, value),\n          },\n        fullRow && {\n          name: \"Drill down\",\n          fn: () => query.drillDown(fullRow),\n        },\n      ]);\n  }\n\n  return (\n    <td\n      className={`DataCell ContextCursor ${modelField.type} ${className}`}\n      colSpan={span || 1}\n      onContextMenu={onContextMenu}\n    >\n      {displayValue}\n    </td>\n  );\n}\n\nfunction VTableHeadRow(props) {\n  const { fields, query, classNameFirst, className } = props;\n  return fields.map((field, i) => (\n    <HeadCell\n      {...{ query, field }}\n      key={field.pathStr}\n      className={`HoriBorder ${className} ` + (i ? \"\" : classNameFirst)}\n      verticalArrows={false}\n      leftArrow={i !== 0}\n      rightArrow={i !== fields.length - 1}\n    />\n  ));\n}\n\nfunction VTableBodyRow(props) {\n  const {\n    fields,\n    query,\n    classNameFirst,\n    className,\n    row,\n    formatHints,\n    fullRow,\n  } = props;\n  return fields.map((field, i) => {\n    if (row)\n      return (\n        <DataCell\n          {...{ query }}\n          pathStr={field.pathStr}\n          key={field.pathStr}\n          value={row[field.pathStr]}\n          className={`${i ? \"\" : classNameFirst} ${className}`}\n          modelField={query.getField(field.pathStr)}\n          formatHint={formatHints[field.pathStr]}\n          fullRow={fullRow}\n        />\n      );\n    else\n      return (\n        <td\n          key={field.pathStr}\n          className={`${i ? \"\" : classNameFirst} Empty`}\n        ></td>\n      );\n  });\n}\n\nfunction HTableRow(props) {\n  const {\n    query,\n    field,\n    data,\n    span,\n    className,\n    formatHints,\n    leftArrow,\n    rightArrow,\n  } = props;\n  return (\n    <>\n      <HeadCell\n        {...{ query, field, leftArrow, rightArrow }}\n        verticalArrows={true}\n      />\n      {data.map((col, key) => (\n        <DataCell\n          {...{ key, span, className, query }}\n          value={col[field.pathStr]}\n          modelField={query.getField(field.pathStr)}\n          formatHint={formatHints[field.pathStr]}\n          fullRow={col}\n          pathStr={field.pathStr}\n        />\n      ))}\n    </>\n  );\n}\n\nfunction Results(props) {\n  const { query, cols, rows, body, overlay, formatHints } = props;\n  const colFields = query.colFields();\n  const topTitleSpace = query.rowFields().length - 1;\n  const sideTitleSpace = query.colFields().length\n    ? 1 - query.rowFields().length\n    : 0;\n  const hasBody = query.rowFields().length || query.bodyFields().length || null;\n\n  return (\n    <div className=\"Results\">\n      <Overlay message={overlay} />\n      <div className=\"Scroller\">\n        <table>\n          <thead>\n            {/* col headers and data aka pivots */}\n            {colFields.map((field, i) => {\n              return (\n                <tr key={field.pathStr}>\n                  <Spacer spaces={topTitleSpace} />\n                  <HTableRow\n                    {...{ query, field, formatHints }}\n                    span={query.bodyFields().length}\n                    data={cols}\n                    className={overlay && \"Fade\"}\n                    leftArrow={i !== 0}\n                    rightArrow={i !== colFields.length - 1}\n                  />\n                </tr>\n              );\n            })}\n\n            {/* body/aggregate headers */}\n            {hasBody && (\n              <tr>\n                <Spacer spaces={sideTitleSpace} />\n                <VTableHeadRow\n                  {...{ query }}\n                  fields={query.rowFields()}\n                  className=\"Freeze\"\n                />\n                {(cols.length ? cols : [null]).map((_, key) => (\n                  <VTableHeadRow\n                    {...{ key, query }}\n                    fields={query.bodyFields()}\n                    classNameFirst=\"LeftBorder\"\n                    className=\"Freeze\"\n                  />\n                ))}\n              </tr>\n            )}\n          </thead>\n\n          {/* row headers and body */}\n          <tbody className={overlay && \"Fade\"}>\n            {hasBody &&\n              rows.map(\n                (row, rowIndex) =>\n                  row && (\n                    <tr key={rowIndex}>\n                      <Spacer spaces={sideTitleSpace} />\n                      <VTableBodyRow\n                        {...{ query, row, formatHints }}\n                        fields={query.rowFields()}\n                        fullRow={row}\n                      />\n                      {body.map((table, key) => (\n                        <VTableBodyRow\n                          {...{ key, query, formatHints }}\n                          fields={query.bodyFields()}\n                          row={table[rowIndex]}\n                          fullRow={{ ...row, ...cols[key] }}\n                          classNameFirst=\"LeftBorder\"\n                        />\n                      ))}\n                    </tr>\n                  )\n              )}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n\nexport { Results };\n","const empty = {\n  rows: [{}],\n  cols: [{}],\n  body: [[{}]],\n  length: 0,\n  filterErrors: [],\n  parsedFilterValues: [],\n  formatHints: {},\n};\n\nfunction getPartsForQuery(query) {\n  return {\n    model: query.model,\n    fields: query.fields\n      .map(\n        (f) =>\n          (f.pivoted ? \"&\" : \"\") +\n          f.pathStr +\n          { asc: `+${f.priority}`, dsc: `-${f.priority}`, null: \"\" }[f.sort]\n      )\n      .join(\",\"),\n    query: query.filters\n      .map((f) => `${f.pathStr}__${f.lookup}=${encodeURIComponent(f.value)}`)\n      .join(\"&\"),\n    limit: query.limit,\n  };\n}\n\nfunction getRelUrlForQuery(query, media) {\n  const { model, fields, query: query_str, limit } = getPartsForQuery(query);\n  return `query/${model}/${fields}.${media}?${query_str}&limit=${limit}`;\n}\n\nfunction getUrlForQuery(baseUrl, query, media) {\n  const relUrl = getRelUrlForQuery(query, media);\n  return `${window.location.origin}${baseUrl}${relUrl}`;\n}\n\nclass Query {\n  constructor(config, query, setQuery) {\n    this.config = config;\n    this.query = query;\n    this.setQuery = setQuery;\n  }\n\n  getField(pathStr) {\n    const path = pathStr.split(\"__\");\n    let model = this.query.model;\n    for (const field of path.slice(0, -1)) {\n      const modelField = this.config.allModelFields[model].fields[field];\n      if (modelField === undefined) return null;\n      model = modelField.model;\n    }\n    return this.config.allModelFields[model].fields[path.slice(-1)];\n  }\n\n  getType(field) {\n    return this.config.types[field.type];\n  }\n\n  getModelFields(model) {\n    return this.config.allModelFields[model];\n  }\n\n  getDefaultLookupValue(field, type, lookup) {\n    const lookup_type = type.lookups[lookup].type;\n    if (lookup_type.endsWith(\"choice\")) return String(field.choices[0]);\n    else return String(this.config.types[lookup_type].defaultValue);\n  }\n\n  _getFieldIndex(field, fields) {\n    return fields.findIndex((f) => f.pathStr === field.pathStr);\n  }\n\n  addField(pathStr, sort) {\n    const newFields = this.query.fields.filter((f) => f.pathStr !== pathStr);\n    const priorities = newFields\n      .map((f) => f.priority)\n      .filter((f) => f !== null);\n    const newPriority = priorities.length ? Math.max(...priorities) + 1 : 0;\n    newFields.push({\n      pathStr: pathStr,\n      sort: sort,\n      priority: sort ? newPriority : null,\n      pivoted: false,\n    });\n    this.setQuery({ fields: newFields });\n  }\n\n  removeField(field) {\n    const modelField = this.getField(field.pathStr);\n    this.setQuery(\n      {\n        fields: this.query.fields.filter((f) => f.pathStr !== field.pathStr),\n      },\n      modelField.canPivot\n    );\n  }\n\n  moveField(field, left) {\n    const modelField = this.getField(field.pathStr);\n\n    // get the fields in their sections\n    const colFields = this.colFields().slice();\n    const rowFields = this.rowFields().slice();\n    const bodyFields = this.bodyFields().slice();\n\n    // pick the section our field is in\n    let fields = null;\n    if (field.pivoted) fields = colFields;\n    else if (modelField.canPivot) fields = rowFields;\n    else fields = bodyFields;\n\n    // work out it's old and new index\n    const index = this._getFieldIndex(field, fields);\n    const newIndex = index + (left ? -1 : 1);\n\n    // if anything changed then update our section and then\n    // rebuild all the fields from the sections\n    if (0 <= newIndex && newIndex < fields.length) {\n      fields.splice(index, 1);\n      fields.splice(newIndex, 0, field);\n      this.setQuery(\n        { fields: [].concat(rowFields, colFields, bodyFields) },\n        false\n      );\n    }\n  }\n\n  toggleSort(field) {\n    const index = this._getFieldIndex(field, this.query.fields);\n    const newSort = { asc: \"dsc\", dsc: null, null: \"asc\" }[field.sort];\n    let newFields = this.query.fields.slice();\n\n    if (field.sort) {\n      // move any later sort fields forward\n      newFields = newFields.map((f) => ({\n        ...f,\n        priority:\n          f.priority != null && f.priority > field.priority\n            ? f.priority - 1\n            : f.priority,\n      }));\n    }\n\n    if (newSort) {\n      // move all other fiels back and insert the updated one\n      newFields = newFields.map((f) => ({\n        ...f,\n        priority: f.priority != null ? f.priority + 1 : f.priority,\n      }));\n      newFields[index] = { ...field, sort: newSort, priority: 0 };\n    } else {\n      // blank the sort on the updated field\n      newFields[index] = { ...field, sort: null, priority: null };\n    }\n\n    this.setQuery({\n      fields: newFields,\n    });\n  }\n\n  togglePivot(field) {\n    const index = this._getFieldIndex(field, this.query.fields);\n    let newFields = this.query.fields.slice();\n    newFields[index].pivoted = !newFields[index].pivoted;\n    this.setQuery({\n      fields: newFields,\n    });\n  }\n\n  addFilter(pathStr) {\n    const field = this.getField(pathStr);\n    const type = this.getType(field);\n    const newFilters = this.query.filters.slice();\n    newFilters.push({\n      pathStr: pathStr,\n      lookup: type.defaultLookup,\n      value: this.getDefaultLookupValue(field, type, type.defaultLookup),\n    });\n    this.setQuery({ filters: newFilters });\n  }\n\n  filterForValue(pathStr, value, negate) {\n    const lookups = this.getType(this.getField(pathStr)).lookups;\n    if (value === null && lookups.hasOwnProperty(\"is_null\"))\n      return {\n        pathStr: pathStr,\n        lookup: \"is_null\",\n        value: negate ? \"NotNull\" : \"IsNull\",\n      };\n    if (value === \"IsNull\" || value === \"NotNull\")\n      return {\n        pathStr: pathStr,\n        lookup: \"equals\",\n        value: negate ? { IsNull: \"NotNull\", NotNull: \"IsNull\" }[value] : value,\n      };\n    else if (lookups.hasOwnProperty(\"equals\"))\n      return {\n        pathStr: pathStr,\n        lookup: negate ? \"not_equals\" : \"equals\",\n        value: String(value),\n      };\n    else return null;\n  }\n\n  addExactFilter(pathStr, value) {\n    const newFilters = this.query.filters.slice();\n    newFilters.push(this.filterForValue(pathStr, value, false));\n    this.setQuery({ filters: newFilters });\n  }\n\n  addExactExclude(pathStr, value) {\n    const newFilters = this.query.filters.slice();\n    newFilters.push(this.filterForValue(pathStr, value, true));\n    this.setQuery({ filters: newFilters });\n  }\n\n  drillDown(values) {\n    const newFilters = this.query.filters.concat(\n      this.query.fields\n        // limit to filterable\n        .filter((field) => this.getField(field.pathStr).canPivot)\n        .filter((field) => this.getField(field.pathStr).concrete)\n        // values is the contextually filterable stuff, so overlap with above\n        .filter((field) => values.hasOwnProperty(field.pathStr))\n        // and only the filters that will actually do some filtering\n        .filter((field) => {\n          const allValues = field.pivoted ? this.query.cols : this.query.rows;\n          const fieldValues = allValues.map((row) => row[field.pathStr]);\n          const uniqueValues = new Set(fieldValues);\n          return uniqueValues.size > 1;\n        })\n        .map((field) =>\n          this.filterForValue(field.pathStr, values[field.pathStr], false)\n        )\n        .filter((f) => f !== null)\n    );\n    this.setQuery({ filters: newFilters });\n  }\n\n  removeFilter(index) {\n    const newFilters = this.query.filters.slice();\n    newFilters.splice(index, 1);\n    this.setQuery({ filters: newFilters });\n  }\n\n  setFilterValue(index, value) {\n    const newFilters = this.query.filters.slice();\n    newFilters[index] = { ...newFilters[index], value: value };\n    this.setQuery({ filters: newFilters });\n  }\n\n  setFilterLookup(index, lookup) {\n    const newFilters = this.query.filters.slice();\n    const filter = newFilters[index];\n    const field = this.getField(newFilters[index].pathStr);\n    const type = this.getType(field);\n    if (type.lookups[filter.lookup].type !== type.lookups[lookup].type) {\n      filter.value = this.getDefaultLookupValue(field, type, lookup);\n    }\n    filter.lookup = lookup;\n    this.setQuery({ filters: newFilters });\n  }\n\n  setLimit(limit) {\n    limit = Number(limit);\n    this.setQuery({ limit: limit > 0 ? limit : 1 });\n  }\n\n  setModel(model) {\n    this.setQuery({\n      model: model,\n      fields: [],\n      filters: this.config.allModelFields[model].defaultFilters,\n      limit: this.config.defaultRowLimit,\n      ...empty,\n    });\n  }\n\n  getUrlForMedia(media) {\n    return getUrlForQuery(this.config.baseUrl, this.query, media);\n  }\n\n  colFields() {\n    return this.query.fields.filter((f) => f.pivoted);\n  }\n\n  rowFields() {\n    return this.query.fields.filter(\n      (f) => this.getField(f.pathStr).canPivot && !f.pivoted\n    );\n  }\n\n  bodyFields() {\n    return this.query.fields.filter((f) => !this.getField(f.pathStr).canPivot);\n  }\n\n  prettyPathStr(pathStr) {\n    const path = pathStr.split(\"__\");\n    const prettyPath = [];\n    let model = this.query.model;\n    let field = null;\n    for (const part of path) {\n      field = this.config.allModelFields[model].fields[part];\n      model = field.model;\n      prettyPath.push(field.prettyName);\n      prettyPath.push(field.toMany ? \"\\u21f6\" : \"\\u21d2\");\n    }\n    return prettyPath.slice(0, -1).join(\" \");\n  }\n\n  getFieldClass(field) {\n    if (!field.type) return \"RelatedField\";\n    if (!field.concrete) return \"CalculatedField\";\n    if (!field.canPivot) return \"AggregateField\";\n    if (!field.model) return \"FunctionField\";\n    return \"ConcreteField\";\n  }\n}\n\nexport { Query, getPartsForQuery, getRelUrlForQuery, getUrlForQuery, empty };\n","import React, { useContext } from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport {\n  TLink,\n  SLink,\n  useData,\n  version,\n  Save,\n  Delete,\n  CopyText,\n  HasActionIcon,\n  HasToManyIcon,\n  useToggle,\n} from \"./Util\";\nimport { Results } from \"./Results\";\nimport { getPartsForQuery, getRelUrlForQuery } from \"./Query\";\nimport { ShowTooltip, HideTooltip } from \"./Tooltip\";\nimport \"./App.scss\";\n\nfunction FilterValue(props) {\n  const { lookupType, onChange, value, field } = props;\n  const onChangeEvent = (e) => onChange(e.target.value);\n  const showTooltip = useContext(ShowTooltip);\n  const hideTooltip = useContext(HideTooltip);\n  const helpText = {\n    date: [\n      \"Date filter values consist of a series of clauses applied in order left to right starting with a value of `today`.\",\n      \"e.g. 'day=1 month+1 tuesday+2' which means move to the 1st of this month, then move forward a month, then move forward to the second Tuesday.\",\n      \"Possible clauses include 'today', 'now' and literal date values in a variety of formats e.g. '2020-12-21'.\",\n      \"Or you can use 'year', 'month', 'week' or 'day' with '+', '-', or '=' to add remove or replace the given quantity.\",\n      \"Or you can use a weekday name with '+' or '-' to get the n-th next or previous (including today) instance of that day.\",\n      \"Bear in mind that 'day=1 month+1' may produce a different result from 'month+1 day=1', for example on Jan 31st.\",\n    ],\n    datetime: [\n      \"Datetime filter consist of a series of clauses applied in order left to right starting with a value of `now`.\",\n      \"e.g. 'day=1 month+1 tuesday+2' which means move to the 1st of this month, then move forward a month, then move forward to the second Tuesday.\",\n      \"Possible clauses include 'today', 'now' and literal date and time values in a variety of formats e.g. '2020-12-21 14:56'.\",\n      \"Or you can use 'year', 'month', 'week', 'day', 'hour', 'minute' or 'second' with '+', '-', or '=' to add remove or replace the given quantity.\",\n      \"Or you can use a weekday name with '+' or '-' to get the n-th next or previous (including today) instance of that day.\",\n      \"Bear in mind that 'day=1 month+1' may produce a different result from 'month+1 day=1', for example on Jan 31st.\",\n    ],\n  };\n\n  if (props.lookupType === \"boolean\") {\n    return (\n      <select {...{ value }} onChange={onChangeEvent} className=\"FilterValue\">\n        <option value={true}>true</option>\n        <option value={false}>false</option>\n      </select>\n    );\n  } else if (props.lookupType === \"isnull\") {\n    return (\n      <select {...{ value }} onChange={onChangeEvent} className=\"FilterValue\">\n        <option value={\"IsNull\"}>IsNull</option>\n        <option value={\"NotNull\"}>NotNull</option>\n      </select>\n    );\n  } else if (lookupType.endsWith(\"choice\")) {\n    return (\n      <select {...{ value }} onChange={onChangeEvent} className=\"FilterValue\">\n        {field.choices.map((option) => (\n          <option key={option} value={option}>\n            {option}\n          </option>\n        ))}\n      </select>\n    );\n  } else if (lookupType === \"number\") {\n    return (\n      <input\n        {...{ value }}\n        onChange={onChangeEvent}\n        className=\"FilterValue\"\n        type=\"number\"\n        step=\"0\"\n      />\n    );\n  } else if (lookupType === \"jsonfield\") {\n    const parts = value.split(/\\|(.*)/);\n    return (\n      <>\n        <input\n          value={parts[0]}\n          onChange={(e) => onChange(`${e.target.value}|${parts[1]}`)}\n          className=\"FilterValue Half\"\n          type=\"text\"\n        />\n        <input\n          value={parts[1]}\n          onChange={(e) => onChange(`${parts[0]}|${e.target.value}`)}\n          className=\"FilterValue Half\"\n          type=\"text\"\n        />\n      </>\n    );\n  } else {\n    return (\n      <input\n        {...{ value }}\n        onChange={onChangeEvent}\n        className=\"FilterValue\"\n        type=\"text\"\n        onMouseEnter={(e) => showTooltip(e, helpText[lookupType])}\n        onMouseLeave={(e) => hideTooltip(e)}\n      />\n    );\n  }\n}\n\nfunction Filter(props) {\n  const { pathStr, index, lookup, query, value, errorMessage, parsed } = props;\n  const field = query.getField(pathStr);\n  var type = null;\n  var lookupType = null;\n  if (field !== null) {\n    type = query.getType(field);\n    if (type.lookups.hasOwnProperty(lookup))\n      lookupType = type.lookups[lookup].type;\n  }\n\n  if (lookupType === null)\n    return (\n      <tr className=\"Filter\">\n        <td>\n          {\" \"}\n          <SLink onClick={() => query.removeFilter(index)}>close</SLink>{\" \"}\n          {pathStr}\n        </td>\n        <td>{lookup}</td>\n        <td>\n          {value}\n          <p className=\"Error\">{errorMessage}</p>\n        </td>\n      </tr>\n    );\n\n  return (\n    <tr className=\"Filter\">\n      <td>\n        <SLink onClick={() => query.removeFilter(index)}>close</SLink>{\" \"}\n        <TLink onClick={() => query.addField(pathStr, field.defaultSort)}>\n          {query.prettyPathStr(pathStr)}\n        </TLink>{\" \"}\n      </td>\n      <td>\n        <select\n          className=\"Lookup\"\n          value={lookup}\n          onChange={(e) => query.setFilterLookup(index, e.target.value)}\n        >\n          {type.sortedLookups.map((lookupName) => (\n            <option key={lookupName} value={lookupName}>\n              {type.lookups[lookupName].prettyName}\n            </option>\n          ))}\n        </select>\n      </td>\n      <td>=</td>\n      <td>\n        <FilterValue\n          {...{ value, field, lookupType }}\n          onChange={(val) => query.setFilterValue(index, val)}\n        />\n        {errorMessage && <p className=\"Error\">{errorMessage}</p>}\n        {parsed !== null &&\n          (lookupType === \"date\" || lookupType === \"datetime\") && (\n            <p className=\"Success\">{parsed}</p>\n          )}\n      </td>\n    </tr>\n  );\n}\n\nfunction Filters(props) {\n  const { query, filterErrors, parsedFilterValues, filters } = props;\n  const [toggled, toggleLink] = useToggle(true);\n  if (!filters.length) return \"\";\n  return (\n    <form className=\"Filters\" onSubmit={(e) => e.preventDefault()}>\n      <div className=\"FiltersToggle\">{toggleLink}</div>\n      {toggled && (\n        <table>\n          <tbody>\n            {filters.map((filter, index) => (\n              <Filter\n                {...{ query, index }}\n                {...filter}\n                key={index}\n                errorMessage={filterErrors[index]}\n                parsed={parsedFilterValues[index]}\n              />\n            ))}\n          </tbody>\n        </table>\n      )}\n    </form>\n  );\n}\n\nfunction Field(props) {\n  const { query, path, modelField } = props;\n  const type = query.getType(modelField);\n  const [toggled, toggleLink] = useToggle();\n\n  return (\n    <>\n      <tr className=\"Field\">\n        {/* filter */}\n        <td>\n          {modelField.concrete && type.defaultLookup && (\n            <SLink onClick={() => query.addFilter(path.join(\"__\"))}>\n              filter_alt\n            </SLink>\n          )}\n        </td>\n\n        {/* expand */}\n        <td>{modelField.model && toggleLink}</td>\n\n        {/* name */}\n        <td className={`FieldName ${query.getFieldClass(modelField)}`}>\n          {modelField.type ? (\n            <TLink\n              onClick={() =>\n                query.addField(path.join(\"__\"), modelField.defaultSort)\n              }\n            >\n              {modelField.prettyName}\n              <HasActionIcon\n                modelField={modelField}\n                message=\"Has admin actions.\"\n              />\n            </TLink>\n          ) : (\n            <>\n              {modelField.prettyName}\n              <HasToManyIcon\n                modelField={modelField}\n                message=\"Traversing 'To Many' links may add multiple lines per result.\"\n              />\n            </>\n          )}\n        </td>\n      </tr>\n\n      {/* sub fields */}\n      {toggled && (\n        <tr>\n          <td></td>\n          <td colSpan=\"2\">\n            <FieldGroup {...{ query, path }} model={modelField.model} />\n          </td>\n        </tr>\n      )}\n    </>\n  );\n}\n\nfunction FieldGroup(props) {\n  const { query, model, path } = props;\n  const modelFields = query.getModelFields(model);\n  return (\n    <table className=\"FieldGroup\">\n      <tbody>\n        {modelFields.sortedFields.map((fieldName) => {\n          const modelField = modelFields.fields[fieldName];\n          return (\n            <Field\n              key={fieldName}\n              {...{ query, modelField }}\n              path={path.concat([fieldName])}\n            />\n          );\n        })}\n      </tbody>\n    </table>\n  );\n}\n\nconst SEP = \".\";\n\nfunction ModelSelector(props) {\n  const { query, sortedModels, model } = props;\n\n  const modelsByAppLabel = sortedModels.reduce((a, x) => {\n    const [appLabel] = x.split(SEP);\n\n    return {\n      ...a,\n      [appLabel]: [...(a[appLabel] || []), x],\n    };\n  }, {});\n\n  return (\n    <select\n      className=\"ModelSelector\"\n      onChange={(e) => query.setModel(e.target.value)}\n      value={model}\n    >\n      {Object.entries(modelsByAppLabel).map(([byAppLabel, models]) => {\n        return (\n          <optgroup label={byAppLabel}>\n            {models.map((model) => (\n              <option key={model}>{model}</option>\n            ))}\n          </optgroup>\n        );\n      })}\n    </select>\n  );\n}\n\nfunction Logo(props) {\n  return (\n    <Link to=\"/\" className=\"Logo\">\n      <span>DDB</span>\n      <span className=\"Version\">v{version}</span>\n    </Link>\n  );\n}\n\nfunction QueryPage(props) {\n  const {\n    query,\n    rows,\n    cols,\n    body,\n    length,\n    sortedModels,\n    model,\n    filters,\n    filterErrors,\n    parsedFilterValues,\n    baseUrl,\n    overlay,\n    formatHints,\n  } = props;\n\n  let results;\n  if (query.query.fields.length)\n    results = (\n      <Results {...{ query, rows, cols, body, overlay, formatHints }} />\n    );\n  else results = <h1>No fields selected</h1>;\n\n  const [fieldsToggled, fieldsToggleLink] = useToggle(true);\n\n  return (\n    <div className=\"QueryPage\">\n      <ModelSelector {...{ query, sortedModels, model }} />\n      <Filters {...{ query, filters, filterErrors, parsedFilterValues }} />\n      <p>\n        <span className={length >= query.query.limit ? \"Error\" : \"\"}>\n          Limit:{\" \"}\n          <input\n            className=\"RowLimit\"\n            type=\"number\"\n            value={query.query.limit}\n            onChange={(event) => {\n              query.setLimit(event.target.value);\n            }}\n            min=\"1\"\n          />{\" \"}\n          - Showing {length} results -{\" \"}\n        </span>\n        <a href={query.getUrlForMedia(\"csv\")}>Download as CSV</a> -{\" \"}\n        <a href={query.getUrlForMedia(\"json\")}>View as JSON</a> -{\" \"}\n        <a href={query.getUrlForMedia(\"sql\")}>View SQL Query</a> -{\" \"}\n        <Save\n          name=\"View\"\n          apiUrl={`${baseUrl}api/views/`}\n          data={getPartsForQuery(query.query)}\n          redirectUrl={(view) => `/views/${view.pk}.html`}\n        />\n      </p>\n      <div className=\"MainSpace\">\n        <div className=\"FieldsList\">\n          <div className=\"FieldsToggle\">{fieldsToggleLink}</div>\n          {fieldsToggled && (\n            <div className=\"Scroller\">\n              <FieldGroup {...{ query, model }} path={[]} />\n            </div>\n          )}\n        </div>\n        {results}\n        <div />\n      </div>\n    </div>\n  );\n}\n\nfunction EditSavedView(props) {\n  const { canMakePublic, baseUrl } = props;\n  const { pk } = useParams();\n  const url = `${baseUrl}api/views/${pk}/`;\n  const [view, setView] = useData(url);\n  if (!view) return \"\";\n  return (\n    <div className=\"EditSavedView\">\n      <div>\n        <div className=\"SavedViewActions\">\n          <span className=\"SavedViewTitle\">Saved View</span>\n          <Link to={view.link}>Open</Link>\n        </div>\n        <form>\n          <input\n            type=\"text\"\n            value={view.name}\n            onChange={(event) => {\n              setView({ name: event.target.value });\n            }}\n            className=\"SavedViewName\"\n            placeholder=\"enter a name\"\n          />\n          <table>\n            <tbody>\n              <tr>\n                <th>Model:</th>\n                <td>{view.model}</td>\n              </tr>\n              <tr>\n                <th>Fields:</th>\n                <td>{view.fields.replace(/,/g, \"\\u200b,\")}</td>\n              </tr>\n              <tr>\n                <th>Filters:</th>\n                <td>{view.query.replace(/&/g, \"\\u200b&\")}</td>\n              </tr>\n              <tr>\n                <th>Limit:</th>\n                <td className=\"SavedViewLimit\">\n                  <input\n                    className=\"RowLimit\"\n                    type=\"number\"\n                    value={view.limit}\n                    onChange={(event) => {\n                      setView({ limit: event.target.value });\n                    }}\n                  />\n                </td>\n              </tr>\n              <tr>\n                <th>Created Time:</th>\n                <td>{view.createdTime}</td>\n              </tr>\n            </tbody>\n          </table>\n          <textarea\n            value={view.description}\n            onChange={(event) => {\n              setView({ description: event.target.value });\n            }}\n            placeholder=\"enter a description\"\n          />\n          {canMakePublic && (\n            <table>\n              <tbody>\n                <tr>\n                  <th>Is Public:</th>\n                  <td>\n                    <input\n                      type=\"checkbox\"\n                      checked={view.public}\n                      onChange={(event) => {\n                        setView({ public: event.target.checked });\n                      }}\n                    />\n                  </td>\n                </tr>\n                <tr>\n                  <th>Public link:</th>\n                  <td>{view.public && <CopyText text={view.publicLink} />}</td>\n                </tr>\n                <tr>\n                  <th>Google Sheets:</th>\n                  <td>\n                    {view.public && (\n                      <CopyText text={view.googleSheetsFormula} />\n                    )}\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          )}\n        </form>\n        <div className=\"SavedViewActions\">\n          <Delete apiUrl={url} redirectUrl=\"/\" />\n          <Link to=\"/\">Close</Link>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction SavedViewList(props) {\n  const { baseUrl } = props;\n  const [savedViews] = useData(`${baseUrl}api/views/`);\n  if (!savedViews) return \"\";\n  return (\n    <div className=\"SavedViewList\">\n      <h1>Saved Views</h1>\n      {savedViews.map((view, index) => (\n        <div key={index}>\n          <h2>\n            <Link className=\"Link\" to={view.link}>\n              {view.name || \"<unnamed>\"}\n            </Link>\n          </h2>\n          <p>\n            on {view.model} - <Link to={`/views/${view.pk}.html`}>edit</Link>\n          </p>\n          <p>{view.description}</p>\n        </div>\n      ))}\n    </div>\n  );\n}\n\nfunction HomePage(props) {\n  const { sortedModels, baseUrl, defaultRowLimit, allModelFields } = props;\n  return (\n    <div className=\"HomePage\">\n      <div>\n        <h1>Models</h1>\n        <div>\n          {sortedModels.map((model) => (\n            <div key={model}>\n              <h2>\n                <Link\n                  to={getRelUrlForQuery(\n                    {\n                      model: model,\n                      fields: [],\n                      filters: allModelFields[model].defaultFilters,\n                      limit: defaultRowLimit,\n                    },\n                    \"html\"\n                  )}\n                  className=\"Link\"\n                >\n                  {model}\n                </Link>\n              </h2>\n            </div>\n          ))}\n        </div>\n      </div>\n      <SavedViewList {...{ baseUrl }} />\n    </div>\n  );\n}\n\nexport { HomePage, QueryPage, Logo, EditSavedView };\n","import * as Sentry from \"@sentry/browser\";\nimport React, { useState, useEffect } from \"react\";\nimport {\n  BrowserRouter,\n  Switch,\n  Route,\n  useParams,\n  useLocation,\n} from \"react-router-dom\";\nimport \"./App.scss\";\nimport { ContextMenu } from \"./ContextMenu\";\nimport { Tooltip } from \"./Tooltip\";\nimport { HomePage, QueryPage, Logo, EditSavedView } from \"./Components\";\nimport { Query, getUrlForQuery, empty } from \"./Query\";\nimport { doGet, fetchInProgress } from \"./Util\";\n\nconst assert = require(\"assert\");\n\nconst BOOTING = \"Booting...\";\nconst LOADING = \"Loading...\";\nconst ERROR = \"Error\";\n\nfunction QueryApp(props) {\n  const { config } = props;\n  const { model, fieldStr } = useParams();\n  const [status, setStatus] = useState(BOOTING);\n  const [query, setQuery] = useState({\n    model: \"\",\n    fields: [],\n    filters: [],\n    limit: config.defaultRowLimit,\n    ...empty,\n  });\n  const queryStr = useLocation().search;\n\n  const handleError = (e) => {\n    if (e.name !== \"AbortError\") {\n      setStatus(ERROR);\n      console.log(e);\n      Sentry.captureException(e);\n    }\n  };\n\n  const fetchResults = (state) => {\n    setStatus(LOADING);\n    const url = getUrlForQuery(config.baseUrl, state, \"json\");\n\n    return doGet(url).then((response) => {\n      setQuery((query) => ({\n        ...query,\n        body: response.body,\n        cols: response.cols,\n        rows: response.rows,\n        length: response.length,\n        formatHints: response.formatHints,\n        filterErrors: response.filterErrors,\n        parsedFilterValues: response.parsedFilterValues,\n      }));\n      setStatus(fetchInProgress ? LOADING : undefined);\n      return response;\n    });\n  };\n\n  useEffect(() => {\n    const popstate = (e) => {\n      setQuery(e.state);\n      fetchResults(e.state).catch(handleError);\n    };\n\n    const url = `${config.baseUrl}query/${model}/${\n      fieldStr || \"\"\n    }.query${queryStr}`;\n\n    doGet(url).then((response) => {\n      const reqState = {\n        model: response.model,\n        fields: response.fields,\n        filters: response.filters,\n        limit: response.limit,\n        ...empty,\n      };\n      setQuery(reqState);\n      setStatus(LOADING);\n      window.history.replaceState(\n        reqState,\n        null,\n        getUrlForQuery(config.baseUrl, reqState, \"html\")\n      );\n      window.addEventListener(\"popstate\", popstate);\n      fetchResults(reqState).catch(handleError);\n    });\n\n    return () => {\n      window.removeEventListener(\"popstate\", popstate);\n    };\n    // eslint-disable-next-line\n  }, []);\n\n  const handleQueryChange = (queryChange, reload = true) => {\n    const newState = { ...query, ...queryChange };\n\n    setQuery(newState);\n\n    const request = {\n      model: newState.model,\n      fields: newState.fields,\n      filters: newState.filters,\n      limit: newState.limit,\n      ...empty,\n    };\n    window.history.pushState(\n      request,\n      null,\n      getUrlForQuery(config.baseUrl, newState, \"html\")\n    );\n\n    if (!reload) return;\n\n    fetchResults(newState)\n      .then((response) => {\n        const res = { ...response, ...empty };\n        const req = { ...request };\n        assert.deepStrictEqual(res, req);\n      })\n      .catch(handleError);\n  };\n\n  if (status === BOOTING) return \"\";\n  const queryObj = new Query(config, query, handleQueryChange);\n  return (\n    <QueryPage\n      overlay={status}\n      query={queryObj}\n      sortedModels={config.sortedModels}\n      baseUrl={config.baseUrl}\n      {...query}\n    />\n  );\n}\n\nfunction App(props) {\n  const { baseUrl, canMakePublic } = props;\n  return (\n    <BrowserRouter basename={baseUrl}>\n      <ContextMenu>\n        <Tooltip>\n          <Logo />\n          <Switch>\n            <Route path=\"/query/:model/:fieldStr?.html\">\n              <QueryApp config={props} />\n            </Route>\n            <Route path=\"/views/:pk.html\">\n              <EditSavedView {...{ baseUrl, canMakePublic }} />\n            </Route>\n            <Route path=\"/\">\n              <HomePage {...props} />\n            </Route>\n          </Switch>\n        </Tooltip>\n      </ContextMenu>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport * as Sentry from \"@sentry/browser\";\nimport \"./index.scss\";\nimport App from \"./App\";\n\nconst config = JSON.parse(\n    document.getElementById(\"backend-config\").textContent\n);\nconst version = document.getElementById(\"backend-version\").textContent.trim();\n\nif (config.sentryDsn) {\n    Sentry.init({\n        dsn: config.sentryDsn,\n        release: version,\n        attachStacktrace: true,\n        maxValueLength: 10000,\n    });\n}\n\nReactDOM.render(\n    <React.StrictMode>\n        <App {...config} />\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n"],"sourceRoot":""}